"use strict";function peg$subclass(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function peg$SyntaxError(t,r,e,n){this.message=t,this.expected=r,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(t,r){r=void 0!==r?r:{};var e,n={},s={ODataRelativeURI:Ze},u=Ze,a="/",o=ye("/",!1),c=ye("?",!1),i=ye("&",!1),f="$count",l=ye("$count",!1),h="$ref",p=ye("$ref",!1),A="$value",d=ye("$value",!1),v=ye("=",!1),g="$select=",b=ye("$select=",!1),m="$expand=",x=ye("$expand=",!1),y="$filter=",C=ye("$filter=",!1),$="$orderby=",w=ye("$orderby=",!1),E="$top=",S=ye("$top=",!1),z="$skip=",Z=ye("$skip=",!1),j="$skiptoken=",O=ye("$skiptoken=",!1),B="$search=",k=ye("$search=",!1),R="$count=",F=ye("$count=",!1),T="$apply=",L=ye("$apply=",!1),N=ye("*",!1),_=ye(";",!1),q=function(t){return t?[t]:[]},I=function(t,r){t.push({xpr:r})},D=function(t,r){t.push({val:r})},U=function(t,r,e){t.push(r,...e)},M=function(t,r){t.push(r)},P=function(t,r,e){t.push(r,...e)},J=":",G=ye(":",!1),H="any",K=ye("any",!1),Q="all",V=ye("all",!1),W=ye("asc",!1),X="desc",Y=ye("desc",!1),tt=/^[a-zA-Z]/,rt=Ce([["a","z"],["A","Z"]],!1,!1),et=/^[a-zA-Z0-9\-]/,nt=Ce([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),st=/^[^&]/,ut=Ce(["&"],!0,!1),at=$e("a comparison"),ot=ye("eq",!1),ct=ye("ne",!1),it=ye("lt",!1),ft=ye("gt",!1),lt=ye("le",!1),ht=ye("ge",!1),pt=(ye("add",!1),ye("sub",!1),ye("mul",!1),ye("div",!1),ye("mod",!1),$e("an operand")),At=$e("a reference"),dt=function(t,r){return r},vt=function(t){return{val:t}},gt=ye("{",!1),bt=/^[^}]/,mt=Ce(["}"],!0,!1),xt=ye("}",!1),yt="[",Ct=ye("[",!1),$t="]",wt=ye("]",!1),Et=/^[^\]]/,St=Ce(["]"],!0,!1),zt=$e("a function call"),Zt=/^[a-z]/,jt=Ce([["a","z"]],!1,!1),Ot=function(t,r,e){return e},Bt=$e("a boolean function"),kt="contains",Rt=ye("contains",!1),Ft="endswith",Tt=ye("endswith",!1),Lt="startswith",Nt=ye("startswith",!1),_t=ye("NOT",!0),qt=ye("AND",!0),It=ye("OR",!0),Dt="aggregate",Ut=ye("aggregate",!1),Mt="groupby",Pt=ye("groupby",!1),Jt="filter",Gt=ye("filter",!1),Ht="expand",Kt=ye("expand",!1),Qt="search",Vt=ye("search",!1),Wt="concat",Xt=ye("concat",!1),Yt="compute",tr=ye("compute",!1),rr="bottompercent",er=ye("bottompercent",!1),nr="bottomsum",sr=ye("bottomsum",!1),ur="toppercent",ar=ye("toppercent",!1),or="topsum",cr=ye("topsum",!1),ir="with",fr=ye("with",!1),lr="from",hr=ye("from",!1),pr=ye("as",!1),Ar="rollup",dr=ye("rollup",!1),vr="$all",gr=ye("$all",!1),br="topcount",mr=ye("topcount",!1),xr="bottomcount",yr=ye("bottomcount",!1),Cr="identity",$r=ye("identity",!1),wr="true",Er=ye("true",!1),Sr="false",zr=ye("false",!1),Zr=$e("Edm.String"),jr=ye("'",!1),Or="''",Br=ye("''",!1),kr=/^[^']/,Rr=Ce(["'"],!0,!1),Fr='"',Tr=ye('"',!1),Lr='\\"',Nr=ye('\\"',!1),_r=/^[^"]/,qr=Ce(['"'],!0,!1),Ir=/^[a-zA-Z0-9.+\-]/,Dr=Ce([["a","z"],["A","Z"],["0","9"],".","+","-"],!1,!1),Ur=/^[0-9]/,Mr=Ce([["0","9"]],!1,!1),Pr="-",Jr=ye("-",!1),Gr=ye("T",!1),Hr=ye(".",!1),Kr=ye("Z",!1),Qr=ye("+",!1),Vr=/^[+\-]/,Wr=Ce(["+","-"],!1,!1),Xr=ye("e",!1),Yr=/^[_a-zA-Z]/,te=Ce(["_",["a","z"],["A","Z"]],!1,!1),re=/^[_a-zA-Z0-9"."]/,ee=Ce(["_",["a","z"],["A","Z"],["0","9"],'"',".",'"'],!1,!1),ne=/^[0-9a-zA-Z]/,se=Ce([["0","9"],["a","z"],["A","Z"]],!1,!1),ue=/^[a-zA-Z0-9\-"."_~!$&'()*+,;=:@]/,ae=Ce([["a","z"],["A","Z"],["0","9"],"-",'"',".",'"',"_","~","!","$","&","'","(",")","*","+",",",";","=",":","@"],!1,!1),oe=ye(",",!1),ce=ye("(",!1),ie=ye(")",!1),fe=$e("optional whitespaces"),le=/^[ \t\n]/,he=Ce([" ","\t","\n"],!1,!1),pe=$e("mandatory whitespaces"),Ae=0,de=0,ve=[{line:1,column:1}],ge=0,be=[],me=0;if("startRule"in r){if(!(r.startRule in s))throw new Error("Can't start parsing from rule \""+r.startRule+'".');u=s[r.startRule]}function xe(t,r){throw function(t,r){return new peg$SyntaxError(t,null,null,r)}(t,r=void 0!==r?r:Ee(de,Ae))}function ye(t,r){return{type:"literal",text:t,ignoreCase:r}}function Ce(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function $e(t){return{type:"other",description:t}}function we(r){var e,n=ve[r];if(n)return n;for(e=r-1;!ve[e];)e--;for(n={line:(n=ve[e]).line,column:n.column};e<r;)10===t.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return ve[r]=n,n}function Ee(t,r){var e=we(t),n=we(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function Se(t){Ae<ge||(Ae>ge&&(ge=Ae,be=[]),be.push(t))}function ze(t,r,e){return new peg$SyntaxError(peg$SyntaxError.buildMessage(t,r),t,r,e)}function Ze(){var r,e,s,u,f,l,h,p,A,d,v,g,b,m;if(r=Ae,47===t.charCodeAt(Ae)?(e=a,Ae++):(e=n,0===me&&Se(o)),e===n&&(e=null),e!==n)if(s=Ae,(u=je())!==n&&(de=s,u=void(On=u)),(s=u)!==n){if(u=Ae,(f=$n())!==n)if(63===t.charCodeAt(Ae)?(l="?",Ae++):(l=n,0===me&&Se(c)),l!==n)if((h=$n())!==n)if((p=Be())!==n){for(A=[],d=Ae,(v=$n())!==n?(38===t.charCodeAt(Ae)?(g="&",Ae++):(g=n,0===me&&Se(i)),g!==n&&(b=$n())!==n&&(m=Be())!==n?d=v=[v,g,b,m]:(Ae=d,d=n)):(Ae=d,d=n);d!==n;)A.push(d),d=Ae,(v=$n())!==n?(38===t.charCodeAt(Ae)?(g="&",Ae++):(g=n,0===me&&Se(i)),g!==n&&(b=$n())!==n&&(m=Be())!==n?d=v=[v,g,b,m]:(Ae=d,d=n)):(Ae=d,d=n);A!==n?u=f=[f,l,h,p,A]:(Ae=u,u=n)}else Ae=u,u=n;else Ae=u,u=n;else Ae=u,u=n;else Ae=u,u=n;u===n&&(u=null),u!==n&&(f=$n())!==n?(de=r,r=e=function(){if(Bn)return On.columns=[{args:[{val:1}],as:"$count",func:"count"}],delete On.expand,delete On.limit,delete On.orderBy,{SELECT:On};if(On.expand){On.columns||(On.columns=["*"]);for(const t of On.expand){const r=On.columns.findIndex(Ln(t));r>-1&&On.columns.splice(r,1),On.columns.push(t)}delete On.expand}return On=Tn(On),{SELECT:On}}()):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;return r}function je(){var r,e,s,u,c,i,v,g;return r=Ae,t.substr(Ae,6)===f?(e=f,Ae+=6):(e=n,0===me&&Se(l)),e!==n&&(de=r,e=void(Bn=!0)),(r=e)===n&&(r=Ae,e=Ae,t.substr(Ae,4)===h?(s=h,Ae+=4):(s=n,0===me&&Se(p)),s===n&&(t.substr(Ae,6)===A?(s=A,Ae+=6):(s=n,0===me&&Se(d))),(e=s!==n?t.substring(e,Ae):s)!==n&&(de=r,g=e,e=!kn.includes(g)&&{from:{ref:[g]}}),(r=e)===n&&(r=Ae,(e=bn())===n&&(e=He()),e===n&&(e=null),e!==n?(s=Ae,(u=yn())!==n&&(c=Cn())!==n?s=u=[u,c]:(Ae=s,s=n),s===n&&(s=Ae,(u=yn())!==n&&(c=Oe())!==n&&(i=Cn())!==n?s=u=[u,c,i]:(Ae=s,s=n)),s===n&&(s=null),s!==n?(u=function(){var r,e,s;r=Ae,e=[],ue.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(ae));if(s!==n)for(;s!==n;)e.push(s),ue.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(ae));else e=n;r=e!==n?t.substring(r,Ae):e;return r}(),u===n&&(u=null),u!==n?(c=Ae,47===t.charCodeAt(Ae)?(i=a,Ae++):(i=n,0===me&&Se(o)),i!==n&&(v=je())!==n?(de=c,c=i=v):(Ae=c,c=n),c===n&&(c=null),c!==n?(de=r,r=e=function(t,r,e,n){e&&([t,r,e]=Nn(t,r,e));const s=[r?r.length>2?{id:t,where:r[1].map((t=>t.val&&t.val.match&&t.val.match(/^"(.*)"$/)?{val:t.val.match(/^"(.*)"$/)[1]}:t))}:{id:t,where:[]}:Zn?`${Object.prototype.hasOwnProperty.call(t,"val")?t.val:t}`:t];if(n&&n.from){const t=n.from.ref;Object.prototype.hasOwnProperty.call(t[0],"val")&&(s[s.length-1]={id:s[s.length-1],where:[t.shift()]}),s.push(...t)}const u={from:{ref:s}};return n&&n.columns&&(u.columns=n.columns),u}(e,s,u,c)):(Ae=r,r=n)):(Ae=r,r=n)):(Ae=r,r=n)):(Ae=r,r=n))),r}function Oe(){var r,e,s,u,a,o,c;return r=Ae,(e=He())!==n&&(de=r,e=[e]),(r=e)===n&&(r=Ae,(e=Ge())!==n&&$n()!==n?(61===t.charCodeAt(Ae)?(s="=",Ae++):(s=n,0===me&&Se(v)),s!==n&&$n()!==n?((u=He())===n&&(u=Ae,(a=dn())!==n&&(de=u,a={val:a}),u=a),u!==n?(a=Ae,(o=xn())!==n&&(c=Oe())!==n?a=o=[o,c]:(Ae=a,a=n),a===n&&(a=null),a!==n?(de=r,e=function(t,r,e){const n=[t,"=",r];return e&&n.push("and",...e[1]),n}(e,u,a),r=e):(Ae=r,r=n)):(Ae=r,r=n)):(Ae=r,r=n)):(Ae=r,r=n)),r}function Be(){var r,e,s,u,a,o,c,i;if(r=Ae,t.substr(Ae,8)===g?(e=g,Ae+=8):(e=n,0===me&&Se(b)),e!==n)if((s=$n())!==n)if((u=ke())!==n){for(a=[],o=Ae,(c=xn())!==n&&(i=ke())!==n?o=c=[c,i]:(Ae=o,o=n);o!==n;)a.push(o),o=Ae,(c=xn())!==n&&(i=ke())!==n?o=c=[c,i]:(Ae=o,o=n);a!==n?r=e=[e,s,u,a]:(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;else Ae=r,r=n;if(r===n){if(r=Ae,t.substr(Ae,8)===m?(e=m,Ae+=8):(e=n,0===me&&Se(x)),e!==n)if((s=$n())!==n)if((u=Re())!==n){for(a=[],o=Ae,(c=xn())!==n&&(i=Re())!==n?o=c=[c,i]:(Ae=o,o=n);o!==n;)a.push(o),o=Ae,(c=xn())!==n&&(i=Re())!==n?o=c=[c,i]:(Ae=o,o=n);a!==n?r=e=[e,s,u,a]:(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;else Ae=r,r=n;if(r===n&&(r=Ae,t.substr(Ae,8)===y?(e=y,Ae+=8):(e=n,0===me&&Se(C)),e!==n&&(s=$n())!==n&&(u=Ne())!==n?r=e=[e,s,u]:(Ae=r,r=n),r===n)){if(r=Ae,t.substr(Ae,9)===$?(e=$,Ae+=9):(e=n,0===me&&Se(w)),e!==n)if((s=$n())!==n)if((u=Ue())!==n){for(a=[],o=Ae,(c=xn())!==n&&(i=Ue())!==n?o=c=[c,i]:(Ae=o,o=n);o!==n;)a.push(o),o=Ae,(c=xn())!==n&&(i=Ue())!==n?o=c=[c,i]:(Ae=o,o=n);a!==n?r=e=[e,s,u,a]:(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;else Ae=r,r=n;r===n&&(r=Ae,t.substr(Ae,5)===E?(e=E,Ae+=5):(e=n,0===me&&Se(S)),e!==n&&(s=$n())!==n?(u=function(){var t,r;t=Ae,(r=gn())!==n&&(de=t,e=r,r=void((On.limit||(On.limit={})).rows={val:e}));var e;return t=r}(),u!==n?r=e=[e,s,u]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,6)===z?(e=z,Ae+=6):(e=n,0===me&&Se(Z)),e!==n&&(s=$n())!==n&&(u=Fe())!==n?r=e=[e,s,u]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,11)===j?(e=j,Ae+=11):(e=n,0===me&&Se(O)),e!==n&&(s=$n())!==n&&(u=Fe())!==n?r=e=[e,s,u]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,8)===B?(e=B,Ae+=8):(e=n,0===me&&Se(k)),e!==n&&(s=$n())!==n&&(u=Te())!==n?r=e=[e,s,u]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,7)===R?(e=R,Ae+=7):(e=n,0===me&&Se(F)),e!==n&&(s=$n())!==n?(u=function(){var t,r;t=Ae,(r=pn())!==n&&(de=t,r=void(r&&(On.count=!0)));return t=r}(),u!==n?r=e=[e,s,u]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,7)===T?(e=T,Ae+=7):(e=n,0===me&&Se(L)),e!==n&&(s=$n())!==n&&(u=Me())!==n?r=e=[e,s,u]:(Ae=r,r=n),r===n&&(r=function(){var r,e,s,u,a,o;r=Ae,tt.test(t.charAt(Ae))?(e=t.charAt(Ae),Ae++):(e=n,0===me&&Se(rt));if(e!==n){for(s=[],et.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(nt));u!==n;)s.push(u),et.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(nt));if(s!==n)if(61===t.charCodeAt(Ae)?(u="=",Ae++):(u=n,0===me&&Se(v)),u!==n){for(a=[],st.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(ut));o!==n;)a.push(o),st.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(ut));a!==n?r=e=[e,s,u,a]:(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n}else Ae=r,r=n;return r}())))))))}}return r}function ke(){var r,e,s;return r=Ae,42===t.charCodeAt(Ae)?(e="*",Ae++):(e=n,0===me&&Se(N)),e===n&&(e=Ge()),e!==n&&(de=r,s=e,On.columns=Array.isArray(On.columns)?On.columns:[],On.columns.find(Ln(s))||On.columns.push(s),e=s),r=e}function Re(){var r,e,s,u,a,o,c,i,f,l,h;if(r=Ae,e=Ae,42===t.charCodeAt(Ae)?(s="*",Ae++):(s=n,0===me&&Se(N)),s===n&&(s=Ge()),s!==n&&(de=e,s=function(t){const r="*"===t?{}:t;return r.expand="*",Array.isArray(On.expand)||(On.expand=[]),On.expand.find(Ln(r))||On.expand.push(r),r}(s)),(e=s)!==n){if(s=Ae,u=Ae,(a=yn())!==n&&(de=u,jn.push(On),On=On.expand[On.expand.length-1],a=void(On.expand="*")),(u=a)!==n){for(a=Ae,o=[],c=Ae,(i=$n())!==n?(59===t.charCodeAt(Ae)?(f=";",Ae++):(f=n,0===me&&Se(_)),f===n&&(f=null),f!==n&&(l=$n())!==n&&(h=Be())!==n?c=i=[i,f,l,h]:(Ae=c,c=n)):(Ae=c,c=n);c!==n;)o.push(c),c=Ae,(i=$n())!==n?(59===t.charCodeAt(Ae)?(f=";",Ae++):(f=n,0===me&&Se(_)),f===n&&(f=null),f!==n&&(l=$n())!==n&&(h=Be())!==n?c=i=[i,f,l,h]:(Ae=c,c=n)):(Ae=c,c=n);o!==n&&(de=a,o=function(t){if(On.columns){"*"===On.expand&&(On.expand=[]);for(const t of On.columns)On.expand.find(Ln(t))||On.expand.push(t);delete On.columns}else Array.isArray(On.expand)&&-1===On.expand.indexOf("*")&&On.expand.unshift("*")}()),(a=o)!==n?(o=Ae,(c=Cn())!==n&&(de=o,c=void(On=jn.pop())),(o=c)!==n?s=u=[u,a,o]:(Ae=s,s=n)):(Ae=s,s=n)}else Ae=s,s=n;s===n&&(s=null),s!==n?(u=Ae,(a=xn())!==n&&(o=Re())!==n?u=a=[a,o]:(Ae=u,u=n),u===n&&(u=null),u!==n?r=e=[e,s,u]:(Ae=r,r=n)):(Ae=r,r=n)}else Ae=r,r=n;return r}function Fe(){var t,r,e;return t=Ae,(r=gn())!==n&&(de=t,e=r,On.limit&&On.limit.offset&&On.limit.offset.val&&(e+=On.limit.offset.val),r=void((On.limit||(On.limit={})).offset={val:e})),t=r}function Te(){var t,r,e;return t=Ae,(r=Le())!==n&&(de=t,e=r,r=void(On.search=e)),t=r}function Le(){var r,e,s,u,a,o,c;if(r=Ae,e=Ae,(s=We())===n&&(s=null),s!==n&&(de=e,s=q(s)),(e=s)!==n)if(s=Ae,(u=yn())!==n&&(a=Le())!==n&&(o=Cn())!==n?(de=s,s=u=I(e,a)):(Ae=s,s=n),s===n&&(s=Ae,u=function(){var r,e,s,u,a;r=Ae,34===t.charCodeAt(Ae)?(e=Fr,Ae++):(e=n,0===me&&Se(Tr));if(e!==n){for(s=Ae,u=[],t.substr(Ae,2)===Lr?(a=Lr,Ae+=2):(a=n,0===me&&Se(Nr)),a===n&&(_r.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(qr)));a!==n;)u.push(a),t.substr(Ae,2)===Lr?(a=Lr,Ae+=2):(a=n,0===me&&Se(Nr)),a===n&&(_r.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(qr)));(s=u!==n?t.substring(s,Ae):u)!==n?(34===t.charCodeAt(Ae)?(u=Fr,Ae++):(u=n,0===me&&Se(Tr)),u!==n?(de=r,r=e=s.replace(/\\\\/g,"\\").replace(/\\"/g,'"')):(Ae=r,r=n)):(Ae=r,r=n)}else Ae=r,r=n;return r}(),u!==n&&(de=s,u=D(e,u)),(s=u)===n&&(s=Ae,(u=An())!==n&&(de=s,u=D(e,u)),(s=u)===n&&(s=Ae,(u=dn())!==n&&(de=s,u=D(e,u)),s=u))),s!==n){for(u=[],a=Ae,(o=Xe())===n&&(o=tn())===n&&(o=Ye()),o!==n&&(c=Le())!==n?(de=a,a=o=U(e,o,c)):(Ae=a,a=n);a!==n;)u.push(a),a=Ae,(o=Xe())===n&&(o=tn())===n&&(o=Ye()),o!==n&&(c=Le())!==n?(de=a,a=o=U(e,o,c)):(Ae=a,a=n);u!==n?(de=r,r=e=e):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;return r}function Ne(){var t,r,e;return t=Ae,(r=_e())!==n&&(de=t,e=r,r=void(On.where=e)),t=r}function _e(){var r,e,s,u,a,o,c,i;if(r=Ae,e=Ae,(s=We())===n&&(s=null),s!==n&&(de=e,s=q(s)),(e=s)!==n)if(s=Ae,(u=yn())!==n&&(a=_e())!==n&&(o=Cn())!==n?(de=s,s=u=I(e,a)):(Ae=s,s=n),s===n&&(s=Ae,(u=Pe())!==n&&(de=s,i=u,u=void e.push(...i)),(s=u)===n&&(s=Ae,(u=qe())!==n&&(de=s,u=function(t,r){t.push(...r)}(e,u)),(s=u)===n&&(s=Ae,u=function(){var r,e,s,u;me++,r=Ae,t.substr(Ae,8)===kt?(e=kt,Ae+=8):(e=n,0===me&&Se(Rt));e===n&&(t.substr(Ae,8)===Ft?(e=Ft,Ae+=8):(e=n,0===me&&Se(Tt)),e===n&&(t.substr(Ae,10)===Lt?(e=Lt,Ae+=10):(e=n,0===me&&Se(Nt))));e!==n&&yn()!==n&&(s=Je())!==n&&xn()!==n&&(u=Je())!==n&&Cn()!==n?(de=r,r=e={func:e,args:[s,u]}):(Ae=r,r=n);me--,r===n&&(e=n,0===me&&Se(Bt));return r}(),u!==n&&(de=s,u=function(t,r){t.push(r)}(e,u)),(s=u)===n&&(s=Ae,(u=pn())!==n&&(de=s,u=D(e,u)),s=u)))),s!==n){for(u=[],a=Ae,(o=Xe())===n&&(o=tn()),o!==n&&(c=_e())!==n?(de=a,a=o=U(e,o,c)):(Ae=a,a=n);a!==n;)u.push(a),a=Ae,(o=Xe())===n&&(o=tn()),o!==n&&(c=_e())!==n?(de=a,a=o=U(e,o,c)):(Ae=a,a=n);u!==n?(de=r,r=e=e):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;return r}function qe(){var r,e,s,u,c,i,f;if(r=Ae,e=Ae,(s=bn())!==n&&(de=e,s=[s]),(e=s)!==n)if(47===t.charCodeAt(Ae)?(s=a,Ae++):(s=n,0===me&&Se(o)),s!==n){for(u=[],c=Ae,(i=bn())!==n?(47===t.charCodeAt(Ae)?(f=a,Ae++):(f=n,0===me&&Se(o)),f!==n?(de=c,c=i=M(e,i)):(Ae=c,c=n)):(Ae=c,c=n);c!==n;)u.push(c),c=Ae,(i=bn())!==n?(47===t.charCodeAt(Ae)?(f=a,Ae++):(f=n,0===me&&Se(o)),f!==n?(de=c,c=i=M(e,i)):(Ae=c,c=n)):(Ae=c,c=n);u!==n?(c=Ae,i=function(){var r,e,s;r=Ae,t.substr(Ae,3)===H?(e=H,Ae+=3):(e=n,0===me&&Se(K));e!==n&&yn()!==n?((s=De())===n&&(s=null),s!==n&&Cn()!==n?(de=r,r=e=s):(Ae=r,r=n)):(Ae=r,r=n);return r}(),i!==n&&(de=c,i=function(t,r){let e=t.pop();if(!r)return["exists",{ref:[...t,{id:e}]}];let n=[];for(let t=0,s=0;t<r.length;++t){let u=r[t];u.ref&&0===u.ref.length&&"="===r[t+1]?n[s++]={func:"contains",args:[{ref:e},r[t+=2]]}:n[s++]=u}return n.length<r.length?(e=t.pop(),["exists",{ref:[...t,{id:e,where:n}]}]):["exists",{ref:[...t,{id:e,where:r}]}]}(e,i)),(c=i)===n&&(c=Ae,i=function(){var r,e,s;r=Ae,t.substr(Ae,3)===Q?(e=Q,Ae+=3):(e=n,0===me&&Se(V));e!==n&&yn()!==n&&(s=De())!==n&&Cn()!==n?(de=r,r=e=s):(Ae=r,r=n);return r}(),i!==n&&(de=c,i=function(t,r){let e=t.pop();return["not","exists",{ref:[...t,{id:e,where:["not",{xpr:[...r]}]}]}]}(e,i)),c=i),c!==n?(de=r,r=e=c):(Ae=r,r=n)):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;return r}function Ie(){var t,r,e,s,u,a,o,c,i;if(t=Ae,r=Ae,(e=We())===n&&(e=null),e!==n&&(de=r,e=(c=e)?[c]:[]),(r=e)!==n)if(e=Ae,(s=yn())!==n&&(u=Ie())!==n&&(a=Cn())!==n?(de=e,i=u,e=s=void r.push("(",...i,")")):(Ae=e,e=n),e===n&&(e=Ae,(s=Pe())!==n&&(de=e,s=function(t,r){t.push(...r)}(r,s)),(e=s)===n&&(e=Ae,(s=qe())!==n&&(de=e,s=function(t,r){t.push(...r)}(r,s)),e=s)),e!==n){for(s=[],u=Ae,(a=Xe())===n&&(a=tn()),a!==n&&(o=Ie())!==n?(de=u,u=a=P(r,a,o)):(Ae=u,u=n);u!==n;)s.push(u),u=Ae,(a=Xe())===n&&(a=tn()),a!==n&&(o=Ie())!==n?(de=u,u=a=P(r,a,o)):(Ae=u,u=n);s!==n?(de=t,t=r=r):(Ae=t,t=n)}else Ae=t,t=n;else Ae=t,t=n;return t}function De(){var r,e,s,u;return r=Ae,(e=bn())!==n?(58===t.charCodeAt(Ae)?(s=J,Ae++):(s=n,0===me&&Se(G)),s!==n&&(u=Ie())!==n?(de=r,r=e=function(t,r){for(const e of r)e.ref&&e.ref[0]===t&&e.ref.shift();return r}(e,u)):(Ae=r,r=n)):(Ae=r,r=n),r}function Ue(){var r,e,s,u,a;return r=Ae,(e=Ve())===n&&(e=Ge()),e!==n?(s=Ae,wn()!==n?(u=Ae,"asc"===t.substr(Ae,3)?(a="asc",Ae+=3):(a=n,0===me&&Se(W)),a===n&&(t.substr(Ae,4)===X?(a=X,Ae+=4):(a=n,0===me&&Se(Y))),(u=a!==n?t.substring(u,Ae):a)!==n?(de=s,s=u):(Ae=s,s=n)):(Ae=s,s=n),s===n&&(s=null),s!==n?(de=r,r=e=function(t,r){const e=Sn(t,r&&{sort:r});On.orderBy=On.orderBy?[...On.orderBy,e]:[e]}(e,s)):(Ae=r,r=n)):(Ae=r,r=n),r}function Me(){var r,e,s,u,c,i;if(r=Ae,(e=rn())!==n){for(s=[],u=Ae,47===t.charCodeAt(Ae)?(c=a,Ae++):(c=n,0===me&&Se(o)),c!==n&&(i=rn())!==n?u=c=[c,i]:(Ae=u,u=n);u!==n;)s.push(u),u=Ae,47===t.charCodeAt(Ae)?(c=a,Ae++):(c=n,0===me&&Se(o)),c!==n&&(i=rn())!==n?u=c=[c,i]:(Ae=u,u=n);s!==n?r=e=[e,s]:(Ae=r,r=n)}else Ae=r,r=n;return r}function Pe(){var r,e,s,u,a,o;return me++,r=Ae,(e=Je())!==n&&wn()!==n?(s=Ae,"eq"===t.substr(Ae,2)?(u="eq",Ae+=2):(u=n,0===me&&Se(ot)),u===n&&("ne"===t.substr(Ae,2)?(u="ne",Ae+=2):(u=n,0===me&&Se(ct)),u===n&&("lt"===t.substr(Ae,2)?(u="lt",Ae+=2):(u=n,0===me&&Se(it)),u===n&&("gt"===t.substr(Ae,2)?(u="gt",Ae+=2):(u=n,0===me&&Se(ft)),u===n&&("le"===t.substr(Ae,2)?(u="le",Ae+=2):(u=n,0===me&&Se(lt)),u===n&&("ge"===t.substr(Ae,2)?(u="ge",Ae+=2):(u=n,0===me&&Se(ht))))))),(s=u!==n?t.substring(s,Ae):u)!==n&&(u=wn())!==n&&(a=Je())!==n?(de=r,r=e=[e,{eq:"=",ne:"!=",lt:"<",gt:">",le:"<=",ge:">="}[o=s]||o,a]):(Ae=r,r=n)):(Ae=r,r=n),me--,r===n&&(e=n,0===me&&Se(at)),r}function Je(){var r;return me++,(r=Ve())===n&&(r=Ge())===n&&(r=He())===n&&(r=Ke())===n&&(r=Qe())===n&&(r=function(){var r,e,s,u,a;r=Ae,91===t.charCodeAt(Ae)?(e=yt,Ae++):(e=n,0===me&&Se(Ct));if(e!==n){for(s=Ae,u=[],Et.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(St));a!==n;)u.push(a),Et.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(St));(s=u!==n?t.substring(s,Ae):u)!==n?(93===t.charCodeAt(Ae)?(u=$t,Ae++):(u=n,0===me&&Se(wt)),u!==n?(de=r,r=e={list:s.replace(/"/g,"").split(",").map((t=>({val:t})))}):(Ae=r,r=n)):(Ae=r,r=n)}else Ae=r,r=n;return r}()),me--,r===n&&(n,0===me&&Se(pt)),r}function Ge(){var r,e,s,u,c,i,f,l;if(me++,r=Ae,(e=bn())!==n){for(s=[],u=Ae,47===t.charCodeAt(Ae)?(c=a,Ae++):(c=n,0===me&&Se(o)),c!==n&&(i=bn())!==n?(de=u,u=c=dt(0,i)):(Ae=u,u=n);u!==n;)s.push(u),u=Ae,47===t.charCodeAt(Ae)?(c=a,Ae++):(c=n,0===me&&Se(o)),c!==n&&(i=bn())!==n?(de=u,u=c=dt(0,i)):(Ae=u,u=n);s!==n?(de=r,l=s,r=e="null"===(f=e)?{val:null}:{ref:[f,...l]}):(Ae=r,r=n)}else Ae=r,r=n;return me--,r===n&&(e=n,0===me&&Se(At)),r}function He(){var r,e,s;return r=Ae,(e=pn())===n&&(e=function(){var r,e,s,u,a,o,c,i,f,l,h,p,A,d,v,g,b,m,x,y,C,$,w,E;r=Ae,e=Ae,s=[],Ur.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(Mr));if(u!==n)for(;u!==n;)s.push(u),Ur.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(Mr));else s=n;if(s!==n)if(45===t.charCodeAt(Ae)?(u=Pr,Ae++):(u=n,0===me&&Se(Jr)),u!==n)if(Ur.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(Mr)),a!==n)if(Ur.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(Mr)),o!==n)if(45===t.charCodeAt(Ae)?(c=Pr,Ae++):(c=n,0===me&&Se(Jr)),c!==n)if(Ur.test(t.charAt(Ae))?(i=t.charAt(Ae),Ae++):(i=n,0===me&&Se(Mr)),i!==n)if(Ur.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(Mr)),f!==n){if(l=Ae,84===t.charCodeAt(Ae)?(h="T",Ae++):(h=n,0===me&&Se(Gr)),h!==n)if(Ur.test(t.charAt(Ae))?(p=t.charAt(Ae),Ae++):(p=n,0===me&&Se(Mr)),p!==n)if(Ur.test(t.charAt(Ae))?(A=t.charAt(Ae),Ae++):(A=n,0===me&&Se(Mr)),A!==n)if(58===t.charCodeAt(Ae)?(d=J,Ae++):(d=n,0===me&&Se(G)),d!==n)if(Ur.test(t.charAt(Ae))?(v=t.charAt(Ae),Ae++):(v=n,0===me&&Se(Mr)),v!==n)if(Ur.test(t.charAt(Ae))?(g=t.charAt(Ae),Ae++):(g=n,0===me&&Se(Mr)),g!==n){if(b=Ae,58===t.charCodeAt(Ae)?(m=J,Ae++):(m=n,0===me&&Se(G)),m!==n)if(Ur.test(t.charAt(Ae))?(x=t.charAt(Ae),Ae++):(x=n,0===me&&Se(Mr)),x!==n)if(Ur.test(t.charAt(Ae))?(y=t.charAt(Ae),Ae++):(y=n,0===me&&Se(Mr)),y!==n){if(C=Ae,46===t.charCodeAt(Ae)?($=".",Ae++):($=n,0===me&&Se(Hr)),$!==n){if(w=[],Ur.test(t.charAt(Ae))?(E=t.charAt(Ae),Ae++):(E=n,0===me&&Se(Mr)),E!==n)for(;E!==n;)w.push(E),Ur.test(t.charAt(Ae))?(E=t.charAt(Ae),Ae++):(E=n,0===me&&Se(Mr));else w=n;w!==n?C=$=[$,w]:(Ae=C,C=n)}else Ae=C,C=n;C===n&&(C=null),C!==n?b=m=[m,x,y,C]:(Ae=b,b=n)}else Ae=b,b=n;else Ae=b,b=n;else Ae=b,b=n;b===n&&(b=null),b!==n?(90===t.charCodeAt(Ae)?(m="Z",Ae++):(m=n,0===me&&Se(Kr)),m===n&&(m=Ae,43===t.charCodeAt(Ae)?(x="+",Ae++):(x=n,0===me&&Se(Qr)),x===n&&(45===t.charCodeAt(Ae)?(x=Pr,Ae++):(x=n,0===me&&Se(Jr))),x!==n?(Ur.test(t.charAt(Ae))?(y=t.charAt(Ae),Ae++):(y=n,0===me&&Se(Mr)),y!==n?(Ur.test(t.charAt(Ae))?(C=t.charAt(Ae),Ae++):(C=n,0===me&&Se(Mr)),C!==n?(58===t.charCodeAt(Ae)?($=J,Ae++):($=n,0===me&&Se(G)),$!==n?(Ur.test(t.charAt(Ae))?(w=t.charAt(Ae),Ae++):(w=n,0===me&&Se(Mr)),w!==n?(Ur.test(t.charAt(Ae))?(E=t.charAt(Ae),Ae++):(E=n,0===me&&Se(Mr)),E!==n?m=x=[x,y,C,$,w,E]:(Ae=m,m=n)):(Ae=m,m=n)):(Ae=m,m=n)):(Ae=m,m=n)):(Ae=m,m=n)):(Ae=m,m=n)),m===n&&(m=null),m!==n?l=h=[h,p,A,d,v,g,b,m]:(Ae=l,l=n)):(Ae=l,l=n)}else Ae=l,l=n;else Ae=l,l=n;else Ae=l,l=n;else Ae=l,l=n;else Ae=l,l=n;else Ae=l,l=n;l===n&&(l=null),l!==n?e=s=[s,u,a,o,c,i,f,l]:(Ae=e,e=n)}else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;r=e!==n?t.substring(r,Ae):e;return r}()),e!==n&&(de=r,e=vt(e)),(r=e)===n&&(r=mn())===n&&(r=Ae,(e=vn())!==n&&(de=r,e="number"==typeof(s=e)?{val:s}:{val:s,literal:"number"}),(r=e)===n&&(r=Ae,(e=An())!==n&&(de=r,e=vt(e)),r=e)),r}function Ke(){var r,e,s,u,a,o;if(r=Ae,e=Ae,s=Ae,123===t.charCodeAt(Ae)?(u="{",Ae++):(u=n,0===me&&Se(gt)),u!==n){for(a=[],(o=Ke())===n&&(bt.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(mt)));o!==n;)a.push(o),(o=Ke())===n&&(bt.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(mt)));a!==n?(125===t.charCodeAt(Ae)?(o="}",Ae++):(o=n,0===me&&Se(xt)),o!==n?s=u=[u,a,o]:(Ae=s,s=n)):(Ae=s,s=n)}else Ae=s,s=n;return(e=s!==n?t.substring(e,Ae):s)!==n&&(de=r,e=vt(e)),r=e}function Qe(){var r,e,s,u,a,o,c,i;if(r=Ae,e=Ae,s=Ae,91===t.charCodeAt(Ae)?(u=yt,Ae++):(u=n,0===me&&Se(Ct)),u!==n&&(a=$n())!==n?(93===t.charCodeAt(Ae)?(o=$t,Ae++):(o=n,0===me&&Se(wt)),o!==n?s=u=[u,a,o]:(Ae=s,s=n)):(Ae=s,s=n),s===n)if(s=Ae,91===t.charCodeAt(Ae)?(u=yt,Ae++):(u=n,0===me&&Se(Ct)),u!==n)if((a=$n())!==n)if(123===t.charCodeAt(Ae)?(o="{",Ae++):(o=n,0===me&&Se(gt)),o!==n){for(c=[],(i=Qe())===n&&(Et.test(t.charAt(Ae))?(i=t.charAt(Ae),Ae++):(i=n,0===me&&Se(St)));i!==n;)c.push(i),(i=Qe())===n&&(Et.test(t.charAt(Ae))?(i=t.charAt(Ae),Ae++):(i=n,0===me&&Se(St)));c!==n?(93===t.charCodeAt(Ae)?(i=$t,Ae++):(i=n,0===me&&Se(wt)),i!==n?s=u=[u,a,o,c,i]:(Ae=s,s=n)):(Ae=s,s=n)}else Ae=s,s=n;else Ae=s,s=n;else Ae=s,s=n;return(e=s!==n?t.substring(e,Ae):s)!==n&&(de=r,e=vt(e)),r=e}function Ve(){var r,e,s,u,a,o,c,i,f,l;if(me++,r=Ae,e=Ae,s=[],Zt.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(jt)),u!==n)for(;u!==n;)s.push(u),Zt.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(jt));else s=n;if((e=s!==n?t.substring(e,Ae):s)!==n)if((s=yn())!==n)if((u=Je())!==n){for(a=[],o=Ae,xn()!==n&&(c=Je())!==n?(de=o,o=Ot(0,0,c)):(Ae=o,o=n);o!==n;)a.push(o),o=Ae,xn()!==n&&(c=Je())!==n?(de=o,o=Ot(0,0,c)):(Ae=o,o=n);a!==n&&(o=Cn())!==n?(de=r,i=e,f=u,l=a,zn&&!(i in zn.functions)&&En("'"+i+"' is an unknown function in OData URL spec (strict mode)"),r=e={func:i,args:[f,...l]}):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;else Ae=r,r=n;return me--,r===n&&(e=n,0===me&&Se(zt)),r}function We(){var r,e;return r=Ae,$n()!==n?("not"===t.substr(Ae,3).toLowerCase()?(e=t.substr(Ae,3),Ae+=3):(e=n,0===me&&Se(_t)),e!==n&&wn()!==n?(de=r,r="not"):(Ae=r,r=n)):(Ae=r,r=n),r}function Xe(){var r,e;return r=Ae,wn()!==n?("and"===t.substr(Ae,3).toLowerCase()?(e=t.substr(Ae,3),Ae+=3):(e=n,0===me&&Se(qt)),e!==n&&wn()!==n?(de=r,r="and"):(Ae=r,r=n)):(Ae=r,r=n),r}function Ye(){var t,r;return t=Ae,(r=wn())!==n&&(de=t,r="and"),t=r}function tn(){var r,e;return r=Ae,wn()!==n?("or"===t.substr(Ae,2).toLowerCase()?(e=t.substr(Ae,2),Ae+=2):(e=n,0===me&&Se(It)),e!==n&&wn()!==n?(de=r,r="or"):(Ae=r,r=n)):(Ae=r,r=n),r}function rn(){var r,e,s;return r=Ae,t.substr(Ae,9)===Dt?(e=Dt,Ae+=9):(e=n,0===me&&Se(Ut)),e!==n?(s=function(){var t,r,e,s,u,a,o,c,i,f;if(t=Ae,(r=yn())!==n)if((e=$n())!==n)if((s=en())!==n){for(u=[],a=Ae,(o=$n())!==n&&(c=xn())!==n&&(i=$n())!==n&&(f=en())!==n?a=o=[o,c,i,f]:(Ae=a,a=n);a!==n;)u.push(a),a=Ae,(o=$n())!==n&&(c=xn())!==n&&(i=$n())!==n&&(f=en())!==n?a=o=[o,c,i,f]:(Ae=a,a=n);u!==n&&(a=$n())!==n&&(o=Cn())!==n?t=r=[r,e,s,u,a,o]:(Ae=t,t=n)}else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;return t}(),s!==n?r=e=[e,s]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,7)===Mt?(e=Mt,Ae+=7):(e=n,0===me&&Se(Pt)),e!==n?(s=function(){var t,r,e,s,u,a,o,c,i,f,l;if(t=Ae,(r=yn())!==n)if((e=$n())!==n){if(s=Ae,(u=yn())!==n)if((a=on())!==n){for(o=[],c=Ae,(i=xn())!==n&&(f=$n())!==n&&(l=on())!==n?c=i=[i,f,l]:(Ae=c,c=n);c!==n;)o.push(c),c=Ae,(i=xn())!==n&&(f=$n())!==n&&(l=on())!==n?c=i=[i,f,l]:(Ae=c,c=n);o!==n&&(c=Cn())!==n?s=u=[u,a,o,c]:(Ae=s,s=n)}else Ae=s,s=n;else Ae=s,s=n;s!==n?(u=Ae,(a=xn())!==n&&(o=$n())!==n&&(c=Me())!==n?u=a=[a,o,c]:(Ae=u,u=n),u===n&&(u=null),u!==n&&(a=$n())!==n&&(o=Cn())!==n?t=r=[r,e,s,u,a,o]:(Ae=t,t=n)):(Ae=t,t=n)}else Ae=t,t=n;else Ae=t,t=n;return t}(),s!==n?r=e=[e,s]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,6)===Jt?(e=Jt,Ae+=6):(e=n,0===me&&Se(Gt)),e!==n&&(s=cn())!==n?r=e=[e,s]:(Ae=r,r=n),r===n&&(r=function(){var r,e,s,u;r=Ae,t.substr(Ae,8)===br?(e=br,Ae+=8):(e=n,0===me&&Se(mr));e===n&&(t.substr(Ae,11)===xr?(e=xr,Ae+=11):(e=n,0===me&&Se(yr)));e!==n&&yn()!==n&&$n()!==n&&(s=vn())!==n&&$n()!==n&&xn()!==n&&$n()!==n&&(u=Ge())!==n&&$n()!==n&&Cn()!==n?(de=r,r=e=function(t,r,e){const n={...e,sort:"topcount"===t?"desc":"asc"};On.orderBy=On.orderBy?[...On.orderBy,n]:[n],(On.limit||(On.limit={})).rows={val:r}}(e,s,u)):(Ae=r,r=n);return r}(),r===n&&(r=Ae,t.substr(Ae,6)===Ht?(e=Ht,Ae+=6):(e=n,0===me&&Se(Kt)),e!==n&&(s=fn())!==n?r=e=[e,s]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,6)===Qt?(e=Qt,Ae+=6):(e=n,0===me&&Se(Vt)),e!==n?(s=function(){var t,r,e,s,u,a;t=Ae,(r=yn())!==n&&(e=$n())!==n&&(s=Te())!==n&&(u=$n())!==n&&(a=Cn())!==n?t=r=[r,e,s,u,a]:(Ae=t,t=n);return t}(),s!==n?r=e=[e,s]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,6)===Wt?(e=Wt,Ae+=6):(e=n,0===me&&Se(Xt)),e!==n?(s=function(){var t,r,e,s,u,a,o,c,i,f;if(t=Ae,(r=yn())!==n)if((e=$n())!==n)if((s=Me())!==n){if(u=[],a=Ae,(o=$n())!==n&&(c=xn())!==n&&(i=$n())!==n&&(f=Me())!==n?a=o=[o,c,i,f]:(Ae=a,a=n),a!==n)for(;a!==n;)u.push(a),a=Ae,(o=$n())!==n&&(c=xn())!==n&&(i=$n())!==n&&(f=Me())!==n?a=o=[o,c,i,f]:(Ae=a,a=n);else u=n;u!==n&&(a=$n())!==n&&(o=Cn())!==n?t=r=[r,e,s,u,a,o]:(Ae=t,t=n)}else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;return t}(),s!==n?r=e=[e,s]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,7)===Yt?(e=Yt,Ae+=7):(e=n,0===me&&Se(tr)),e!==n?(s=function(){var t,r,e,s,u,a,o,c,i,f;if(t=Ae,(r=yn())!==n)if((e=$n())!==n)if((s=ln())!==n){for(u=[],a=Ae,(o=$n())!==n&&(c=xn())!==n&&(i=$n())!==n&&(f=ln())!==n?a=o=[o,c,i,f]:(Ae=a,a=n);a!==n;)u.push(a),a=Ae,(o=$n())!==n&&(c=xn())!==n&&(i=$n())!==n&&(f=ln())!==n?a=o=[o,c,i,f]:(Ae=a,a=n);u!==n&&(a=$n())!==n&&(o=Cn())!==n?t=r=[r,e,s,u,a,o]:(Ae=t,t=n)}else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;return t}(),s!==n?r=e=[e,s]:(Ae=r,r=n)):(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,13)===rr?(e=rr,Ae+=13):(e=n,0===me&&Se(er)),e!==n&&(s=hn())!==n?r=e=[e,s]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,9)===nr?(e=nr,Ae+=9):(e=n,0===me&&Se(sr)),e!==n&&(s=hn())!==n?r=e=[e,s]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,10)===ur?(e=ur,Ae+=10):(e=n,0===me&&Se(ar)),e!==n&&(s=hn())!==n?r=e=[e,s]:(Ae=r,r=n),r===n&&(r=Ae,t.substr(Ae,6)===or?(e=or,Ae+=6):(e=n,0===me&&Se(cr)),e!==n&&(s=hn())!==n?r=e=[e,s]:(Ae=r,r=n),r===n&&(r=function(){var r;t.substr(Ae,8)===Cr?(r=Cr,Ae+=8):(r=n,0===me&&Se($r));return r}())))))))))))),r}function en(){var r,e,s,u,a;return r=Ae,e=Ae,t.substr(Ae,6)===f?(s=f,Ae+=6):(s=n,0===me&&Se(l)),s!==n&&(u=an())!==n?(de=e,e=s={func:"count",args:["*"],as:u}):(Ae=e,e=n),e===n&&(e=nn()),e!==n&&(de=r,a=e,On.columns=Array.isArray(On.columns)?On.columns:[],On.columns.find(Ln(a))||On.columns.push(a),e=a),r=e}function nn(){var t,r,e,s,u;return t=Ae,(r=Ge())!==n&&(e=sn())!==n?((s=un())===n&&(s=null),s!==n&&(u=an())!==n?(de=t,t=r={func:e,args:[r],as:u}):(Ae=t,t=n)):(Ae=t,t=n),t===n&&(t=Ae,(r=bn())!==n&&(e=yn())!==n&&(s=nn())!==n&&(u=Cn())!==n?t=r=[r,e,s,u]:(Ae=t,t=n)),t}function sn(){var r,e,s,u,a;if(r=Ae,wn()!==n)if(t.substr(Ae,4)===ir?(e=ir,Ae+=4):(e=n,0===me&&Se(fr)),e!==n)if(wn()!==n){if(s=Ae,u=[],Zt.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(jt)),a!==n)for(;a!==n;)u.push(a),Zt.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(jt));else u=n;(s=u!==n?t.substring(s,Ae):u)!==n?(de=r,r=s):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;else Ae=r,r=n;return r}function un(){var r,e,s,u,a,o,c;return r=Ae,(e=wn())!==n?(t.substr(Ae,4)===lr?(s=lr,Ae+=4):(s=n,0===me&&Se(hr)),s!==n&&(u=wn())!==n&&(a=Ge())!==n&&(o=sn())!==n?((c=un())===n&&(c=null),c!==n?r=e=[e,s,u,a,o,c]:(Ae=r,r=n)):(Ae=r,r=n)):(Ae=r,r=n),r}function an(){var r,e,s;return r=Ae,wn()!==n?("as"===t.substr(Ae,2)?(e="as",Ae+=2):(e=n,0===me&&Se(pr)),e!==n&&wn()!==n&&(s=bn())!==n?(de=r,r=s):(Ae=r,r=n)):(Ae=r,r=n),r}function on(){var r,e,s;return r=Ae,e=function(){var r,e,s,u,a,o,c,i,f,l,h;r=Ae,e=Ae,t.substr(Ae,6)===Ar?(s=Ar,Ae+=6):(s=n,0===me&&Se(dr));if(s!==n)if((u=yn())!==n)if((a=$n())!==n)if(t.substr(Ae,4)===vr?(o=vr,Ae+=4):(o=n,0===me&&Se(gr)),o===n&&(o=Ge()),o!==n){if(c=[],i=Ae,(f=$n())!==n&&(l=xn())!==n&&(h=Ge())!==n?i=f=[f,l,h]:(Ae=i,i=n),i!==n)for(;i!==n;)c.push(i),i=Ae,(f=$n())!==n&&(l=xn())!==n&&(h=Ge())!==n?i=f=[f,l,h]:(Ae=i,i=n);else c=n;c!==n&&(i=$n())!==n&&(f=Cn())!==n?e=s=[s,u,a,o,c,i,f]:(Ae=e,e=n)}else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;else Ae=e,e=n;e!==n&&(de=r,e=function(t){const r=new Error("Rollup in groupby is not supported yet.");throw r.statusCode=501,r}());return r=e}(),e===n&&(e=Ge()),e!==n&&(de=r,s=e,e=void(On.groupBy||(On.groupBy=[])).push(s)),r=e}function cn(){var t,r,e,s,u,a;return t=Ae,(r=yn())!==n&&(e=$n())!==n&&(s=Ne())!==n&&(u=$n())!==n&&(a=Cn())!==n?t=r=[r,e,s,u,a]:(Ae=t,t=n),t}function fn(){var t,r,e,s,u,a,o,c,i,f,l,h,p,A;if(t=Ae,(r=yn())!==n)if((e=$n())!==n)if((s=Ge())!==n)if((u=$n())!==n)if((a=xn())!==n)if((o=$n())!==n){if(c=Ae,(i=fn())!==n){for(f=[],l=Ae,(h=$n())!==n&&(p=xn())!==n&&(A=fn())!==n?l=h=[h,p,A]:(Ae=l,l=n);l!==n;)f.push(l),l=Ae,(h=$n())!==n&&(p=xn())!==n&&(A=fn())!==n?l=h=[h,p,A]:(Ae=l,l=n);f!==n?c=i=[i,f]:(Ae=c,c=n)}else Ae=c,c=n;if(c===n)if(c=Ae,(i=cn())!==n){for(f=[],l=Ae,(h=$n())!==n&&(p=xn())!==n&&(A=fn())!==n?l=h=[h,p,A]:(Ae=l,l=n);l!==n;)f.push(l),l=Ae,(h=$n())!==n&&(p=xn())!==n&&(A=fn())!==n?l=h=[h,p,A]:(Ae=l,l=n);f!==n?c=i=[i,f]:(Ae=c,c=n)}else Ae=c,c=n;c!==n&&(i=$n())!==n&&(f=Cn())!==n?t=r=[r,e,s,u,a,o,c,i,f]:(Ae=t,t=n)}else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;else Ae=t,t=n;return t}function ln(){var t,r,e;return t=Ae,(r=_e())!==n&&(e=an())!==n?t=r=[r,e]:(Ae=t,t=n),t}function hn(){var t,r,e,s,u,a,o,c,i,f;return t=Ae,(r=yn())!==n&&(e=$n())!==n&&(s=Je())!==n&&(u=$n())!==n&&(a=xn())!==n&&(o=$n())!==n&&(c=Je())!==n&&(i=$n())!==n&&(f=Cn())!==n?t=r=[r,e,s,u,a,o,c,i,f]:(Ae=t,t=n),t}function pn(){var r,e;return r=Ae,t.substr(Ae,4)===wr?(e=wr,Ae+=4):(e=n,0===me&&Se(Er)),e===n&&(t.substr(Ae,5)===Sr?(e=Sr,Ae+=5):(e=n,0===me&&Se(zr))),e!==n&&(de=r,e="true"===e),r=e}function An(){var r,e,s,u,a;if(me++,r=Ae,39===t.charCodeAt(Ae)?(e="'",Ae++):(e=n,0===me&&Se(jr)),e!==n){for(s=Ae,u=[],t.substr(Ae,2)===Or?(a=Or,Ae+=2):(a=n,0===me&&Se(Br)),a===n&&(kr.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(Rr)));a!==n;)u.push(a),t.substr(Ae,2)===Or?(a=Or,Ae+=2):(a=n,0===me&&Se(Br)),a===n&&(kr.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(Rr)));(s=u!==n?t.substring(s,Ae):u)!==n?(39===t.charCodeAt(Ae)?(u="'",Ae++):(u=n,0===me&&Se(jr)),u!==n?(de=r,r=e=s.replace(/''/g,"'")):(Ae=r,r=n)):(Ae=r,r=n)}else Ae=r,r=n;return me--,r===n&&(e=n,0===me&&Se(Zr)),r}function dn(){var r,e,s;if(r=Ae,e=[],Ir.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(Dr)),s!==n)for(;s!==n;)e.push(s),Ir.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(Dr));else e=n;return r=e!==n?t.substring(r,Ae):e}function vn(){var r,e,s,u,a,o,c,i,f,l;if(r=Ae,e=Ae,s=Ae,Vr.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(Wr)),u===n&&(u=null),u!==n){if(a=[],Ur.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(Mr)),o!==n)for(;o!==n;)a.push(o),Ur.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(Mr));else a=n;if(a!==n){if(o=Ae,46===t.charCodeAt(Ae)?(c=".",Ae++):(c=n,0===me&&Se(Hr)),c!==n){if(i=[],Ur.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(Mr)),f!==n)for(;f!==n;)i.push(f),Ur.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(Mr));else i=n;i!==n?o=c=[c,i]:(Ae=o,o=n)}else Ae=o,o=n;if(o===n&&(o=null),o!==n){if(c=Ae,101===t.charCodeAt(Ae)?(i="e",Ae++):(i=n,0===me&&Se(Xr)),i!==n){if(f=[],Ur.test(t.charAt(Ae))?(l=t.charAt(Ae),Ae++):(l=n,0===me&&Se(Mr)),l!==n)for(;l!==n;)f.push(l),Ur.test(t.charAt(Ae))?(l=t.charAt(Ae),Ae++):(l=n,0===me&&Se(Mr));else f=n;f!==n?c=i=[i,f]:(Ae=c,c=n)}else Ae=c,c=n;c===n&&(c=null),c!==n?s=u=[u,a,o,c]:(Ae=s,s=n)}else Ae=s,s=n}else Ae=s,s=n}else Ae=s,s=n;return(e=s!==n?t.substring(e,Ae):s)!==n&&(de=r,e=Rn(e)),r=e}function gn(){var r,e,s,u,a,o;if(r=Ae,e=Ae,s=Ae,Vr.test(t.charAt(Ae))?(u=t.charAt(Ae),Ae++):(u=n,0===me&&Se(Wr)),u===n&&(u=null),u!==n){if(a=[],Ur.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(Mr)),o!==n)for(;o!==n;)a.push(o),Ur.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(Mr));else a=n;a!==n?s=u=[u,a]:(Ae=s,s=n)}else Ae=s,s=n;return(e=s!==n?t.substring(e,Ae):s)!==n&&(de=r,e=parseInt(e)),r=e}function bn(){var r,e,s,u,a,o,c,i;if(r=Ae,e=Ae,me++,s=pn(),me--,s===n?e=void 0:(Ae=e,e=n),e!==n)if(s=Ae,me++,u=mn(),me--,u===n?s=void 0:(Ae=s,s=n),s!==n){if(u=Ae,a=Ae,Yr.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=n,0===me&&Se(te)),o!==n){for(c=[],re.test(t.charAt(Ae))?(i=t.charAt(Ae),Ae++):(i=n,0===me&&Se(ee));i!==n;)c.push(i),re.test(t.charAt(Ae))?(i=t.charAt(Ae),Ae++):(i=n,0===me&&Se(ee));c!==n?a=o=[o,c]:(Ae=a,a=n)}else Ae=a,a=n;(u=a!==n?t.substring(u,Ae):a)!==n?(de=r,r=e=u):(Ae=r,r=n)}else Ae=r,r=n;else Ae=r,r=n;return r}function mn(){var r,e,s,u,a,o,c,i,f;if(r=Ae,e=Ae,s=Ae,u=[],ne.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(se)),a!==n)for(;a!==n;)u.push(a),ne.test(t.charAt(Ae))?(a=t.charAt(Ae),Ae++):(a=n,0===me&&Se(se));else u=n;if(u!==n)if(45===t.charCodeAt(Ae)?(a=Pr,Ae++):(a=n,0===me&&Se(Jr)),a!==n){if(o=[],c=Ae,i=[],ne.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(se)),f!==n)for(;f!==n;)i.push(f),ne.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(se));else i=n;if(i!==n?(45===t.charCodeAt(Ae)?(f=Pr,Ae++):(f=n,0===me&&Se(Jr)),f===n&&(f=null),f!==n?c=i=[i,f]:(Ae=c,c=n)):(Ae=c,c=n),c!==n)for(;c!==n;){if(o.push(c),c=Ae,i=[],ne.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(se)),f!==n)for(;f!==n;)i.push(f),ne.test(t.charAt(Ae))?(f=t.charAt(Ae),Ae++):(f=n,0===me&&Se(se));else i=n;i!==n?(45===t.charCodeAt(Ae)?(f=Pr,Ae++):(f=n,0===me&&Se(Jr)),f===n&&(f=null),f!==n?c=i=[i,f]:(Ae=c,c=n)):(Ae=c,c=n)}else o=n;o!==n?s=u=[u,a,o]:(Ae=s,s=n)}else Ae=s,s=n;else Ae=s,s=n;return(e=s!==n?t.substring(e,Ae):s)!==n&&(de=r,e=vt(e)),r=e}function xn(){var r,e,s,u;return r=Ae,(e=$n())!==n?(44===t.charCodeAt(Ae)?(s=",",Ae++):(s=n,0===me&&Se(oe)),s!==n&&(u=$n())!==n?r=e=[e,s,u]:(Ae=r,r=n)):(Ae=r,r=n),r}function yn(){var r,e,s,u;return r=Ae,(e=$n())!==n?(40===t.charCodeAt(Ae)?(s="(",Ae++):(s=n,0===me&&Se(ce)),s!==n&&(u=$n())!==n?r=e=[e,s,u]:(Ae=r,r=n)):(Ae=r,r=n),r}function Cn(){var r,e,s;return r=Ae,(e=$n())!==n?(41===t.charCodeAt(Ae)?(s=")",Ae++):(s=n,0===me&&Se(ie)),s!==n?r=e=[e,s]:(Ae=r,r=n)):(Ae=r,r=n),r}function $n(){var r,e,s;for(me++,r=Ae,e=[],le.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(he));s!==n;)e.push(s),le.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(he));return r=e!==n?t.substring(r,Ae):e,me--,r===n&&(e=n,0===me&&Se(fe)),r}function wn(){var r,e,s;if(me++,r=Ae,e=[],le.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(he)),s!==n)for(;s!==n;)e.push(s),le.test(t.charAt(Ae))?(s=t.charAt(Ae),Ae++):(s=n,0===me&&Se(he));else e=n;return r=e!==n?t.substring(r,Ae):e,me--,r===n&&(e=n,0===me&&Se(pe)),r}const En=(t,r=400)=>{xe(JSON.stringify({code:r,message:t}))},Sn=Object.assign,{strict:zn,minimal:Zn}=r,jn=[];let On,Bn;const kn=["$value"],Rn=r.safeNumber||function(t){const r=Number(t);return Number.isSafeInteger(r)?r:t},Fn=(t,r)=>{const e=[...t];for(const t of e)t.xpr&&(t.xpr=Fn(t.xpr,r)),t.args&&(t.args=Fn(t.args,r)),t.ref&&r.includes(t.ref.join(""));return e},Tn=t=>{const r=t.groupBy,e=t.where,n=t.columns||[],s=n.filter((t=>t.as));let u=[],a=[];if(0!==s.length&&(u=n.filter((t=>!t.ref||s.includes(t.ref.join(""))))),r){const t=r.map((({ref:t})=>t&&t.join(""))),e=n.filter((r=>r.ref&&t.includes(r.ref.join(""))));a=0===e.length?[...r]:e}const o=0!==u.length||0!==a.length?[...a,...u]:t.columns;let c={...t};o&&(c.columns=o);if(e&&(r||0!==s.length)){const t=n.map((t=>t.ref&&t.ref.join("")||t.as));c={...c,where:Fn(e,t)}}return c},Ln=t=>r=>t===r||t.as&&r.as&&t.as===r.as||t.ref&&r.ref&&t.ref.join("")===r.ref.join(""),Nn=(t,r,e)=>(t||(t=""),r&&(t+=r.reduce(((t,r)=>{for(const e of r)t+="string"==typeof e?e:e.val?"string"==typeof e.val?`'${e.val}'`:e.val:e.ref[0];return t}),""),r=void 0),[t+=e,r,e]);if((e=u())!==n&&Ae===t.length)return e;throw e!==n&&Ae<t.length&&Se({type:"end"}),ze(be,ge<t.length?t.charAt(ge):null,ge<t.length?Ee(ge,ge+1):Ee(ge,ge))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(t,r){var e={literal:function(t){return'"'+s(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?u(t.parts[r][0])+"-"+u(t.parts[r][1]):u(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function s(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function u(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var r,n,s,u=new Array(t.length);for(r=0;r<t.length;r++)u[r]=(s=t[r],e[s.type](s));if(u.sort(),u.length>0){for(r=1,n=1;r<u.length;r++)u[r-1]!==u[r]&&(u[n]=u[r],n++);u.length=n}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+function(t){return t?'"'+s(t)+'"':"end of input"}(r)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};
